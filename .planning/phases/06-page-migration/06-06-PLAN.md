---
phase: 06-page-migration
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - components/BookContextModal.tsx
  - components/HighlightEditModal.tsx
  - components/HighlightHistoryModal.tsx
  - components/Sidebar.tsx
  - components/BottomNav.tsx
  - components/TagManagerSidebar.tsx
autonomous: true

must_haves:
  truths:
    - "All text-[9px] in modals replaced with text-overline"
    - "All text-[10px] in modals replaced with text-overline"
    - "All text-[10px] in Sidebar and BottomNav replaced with text-overline"
    - "All text-[9px] in TagManagerSidebar replaced with text-overline"
    - "Modal header typography uses token classes (text-heading for DialogTitle)"
    - "No arbitrary text-[Npx] values remain in any modal, popover, sidebar, or nav component"
  artifacts:
    - path: "components/BookContextModal.tsx"
      provides: "Token-aligned book context modal"
    - path: "components/HighlightEditModal.tsx"
      provides: "Token-aligned highlight edit modal"
    - path: "components/HighlightHistoryModal.tsx"
      provides: "Token-aligned highlight history modal"
    - path: "components/Sidebar.tsx"
      provides: "Token-aligned sidebar"
    - path: "components/BottomNav.tsx"
      provides: "Token-aligned bottom nav"
    - path: "components/TagManagerSidebar.tsx"
      provides: "Token-aligned tag manager sidebar"
  key_links: []
---

<objective>
Migrate all modals, popovers, sidebar, and bottom nav to token typography.

Purpose: These are cross-cutting components used across multiple pages. They contain the remaining ~20 arbitrary text-[Npx] values. Migrating them completes the elimination of arbitrary typography from the entire codebase (PAGE-08 requirement for modal standardization).

Output: All modals, Sidebar.tsx, BottomNav.tsx, and TagManagerSidebar.tsx fully aligned with token typography.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-page-migration/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate modal components to token typography</name>
  <files>components/BookContextModal.tsx, components/HighlightEditModal.tsx, components/HighlightHistoryModal.tsx</files>
  <action>
    **BookContextModal.tsx:**
    1. DialogTitle (line 52): `text-2xl font-bold` -> `text-heading font-bold`
       (text-heading = 18px is appropriate for modal titles; text-2xl = 24px is oversized for a modal)
    2. Note label (line 92): `text-[10px] uppercase font-semibold` -> `text-overline uppercase font-semibold`
    3. Location/date metadata (line 96): `text-[10px] text-muted-foreground` -> `text-overline text-muted-foreground`

    **HighlightEditModal.tsx:**
    1. Metadata row (line 103): `text-[9px] text-muted-foreground` -> `text-overline text-muted-foreground`
    2. Highlight textarea label (line 123): `text-[9px] uppercase` -> `text-overline uppercase`
    3. Note textarea label (line 134): `text-[9px] uppercase` -> `text-overline uppercase`
    4. Stats labels (lines 203, 208, 213 -- "Reps", "Ease", "Interval"): `text-[9px] text-muted-foreground uppercase font-semibold` -> `text-overline text-muted-foreground uppercase font-semibold`

    Total: 5 replacements in HighlightEditModal.

    **HighlightHistoryModal.tsx:**
    This modal already uses standard text-xs and text-xl classes. Verify there are no arbitrary text-[Npx] values. If any exist, replace with appropriate tokens.

    **DeleteBookModal.tsx, DeleteCardPopover.tsx, EmptyDeckPopover.tsx:**
    These use standard shadcn AlertDialog components and already have no arbitrary text-[Npx] values (verified in research). Skip these -- no changes needed.

    Do NOT change modal layout, padding, max-width, or max-height values.
    Do NOT change DialogContent, DialogHeader, or DialogFooter structure.
    Do NOT change chart/graph styling in HighlightEditModal or HighlightHistoryModal.
  </action>
  <verify>
    Grep components/BookContextModal.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/HighlightEditModal.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/HighlightHistoryModal.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/BookContextModal.tsx for `text-2xl` -- should find zero occurrences.
  </verify>
  <done>All three modal components have zero arbitrary text-[Npx] values. BookContextModal title uses text-heading. All labels use text-overline.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Sidebar, BottomNav, and TagManagerSidebar to token typography</name>
  <files>components/Sidebar.tsx, components/BottomNav.tsx, components/TagManagerSidebar.tsx</files>
  <action>
    **Sidebar.tsx:**
    1. Line 140: `text-[10px] text-muted-foreground` (free plan label) -> `text-overline text-muted-foreground`
    That is the only arbitrary text value in Sidebar.

    **BottomNav.tsx:**
    1. Line 27: `text-[10px] font-medium` (nav item label) -> `text-overline font-medium`
    That is the only arbitrary text value in BottomNav.

    **TagManagerSidebar.tsx:**
    Search the full file for `text-[9px]` and `text-[10px]` instances. Based on research, there are 3 occurrences of `text-[9px]`. Replace all with `text-overline`.

    Specifically, grep for the pattern and replace each:
    - Any `text-[9px]` -> `text-overline`
    - Any `text-[10px]` -> `text-overline`

    Do NOT change Sheet/SheetContent structure or Tag CRUD logic.
    Do NOT change Sidebar collapse/expand animation or NavLink structure.
    Do NOT change BottomNav safe-area-inset handling.
  </action>
  <verify>
    Grep components/Sidebar.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/BottomNav.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/TagManagerSidebar.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Run `npx tsc --noEmit 2>&1 | grep -iE "(Sidebar|BottomNav|TagManager)"` -- no TypeScript errors.
  </verify>
  <done>Sidebar, BottomNav, and TagManagerSidebar have zero arbitrary text-[Npx] values. All replaced with text-overline.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` shows no new errors in any modified file
- Zero `text-[Npx]` remain in any modal, sidebar, or nav component
- Modal titles use text-heading where previously oversized (text-2xl)
- All label/metadata text uses text-overline consistently
</verification>

<success_criteria>
- BookContextModal: 3 replacements (1 title + 2 labels)
- HighlightEditModal: 5 replacements (all text-[9px] labels)
- Sidebar: 1 replacement
- BottomNav: 1 replacement
- TagManagerSidebar: 3 replacements
- All files compile with no TypeScript errors
- Zero arbitrary text-[Npx] remain across all 6 files
</success_criteria>

<output>
After completion, create `.planning/phases/06-page-migration/06-06-SUMMARY.md`
</output>
