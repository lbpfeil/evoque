---
phase: 06-page-migration
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - pages/Highlights.tsx
  - components/HighlightTableRow.tsx
autonomous: true

must_haves:
  truths:
    - "Highlights page uses PageHeader component with size='default' and actions slot"
    - "All text-[10px] in Highlights.tsx replaced with text-overline"
    - "All text-[10px] and text-[11px] in HighlightTableRow.tsx replaced with token classes"
    - "Custom table structure preserved (selection, sorting, column widths)"
    - "No arbitrary text-[Npx] values remain in either file (column w-[Npx] widths are intentional and kept)"
  artifacts:
    - path: "pages/Highlights.tsx"
      provides: "Token-aligned highlights page with PageHeader"
      contains: "PageHeader"
    - path: "components/HighlightTableRow.tsx"
      provides: "Token-aligned highlight table row"
  key_links:
    - from: "pages/Highlights.tsx"
      to: "components/patterns/PageHeader.tsx"
      via: "import and usage"
      pattern: "import.*PageHeader"
---

<objective>
Migrate Highlights page and HighlightTableRow to canonical design system patterns.

Purpose: Highlights is the most complex page (561 lines) with a custom table, toolbar, bulk actions, and multiple filter popovers. The custom table must be preserved (DataTable cannot support selection/sorting). This plan focuses on header migration and arbitrary text value cleanup without restructuring the table.

Output: Highlights.tsx and HighlightTableRow.tsx fully aligned with token typography while preserving custom table structure.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-page-migration/06-RESEARCH.md
@components/patterns/PageHeader.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Highlights.tsx header and arbitrary values</name>
  <files>pages/Highlights.tsx</files>
  <action>
    1. Add import: `import { PageHeader } from '../components/patterns/PageHeader'`

    2. Replace the manual header block (lines 225-239) with PageHeader + actions:
       The current header has a title, description, and a "Manage Tags" button.
       Replace the entire flex container:
       ```
       <div className="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-4 pt-6 pb-2">
         <div>
           <h1 className="text-3xl font-bold text-foreground tracking-tight">{t('title')}</h1>
           <p className="text-muted-foreground mt-1.5 font-light text-sm">
             {t('stats.summary', { ... })}
           </p>
         </div>
         <button onClick={...} className="self-start flex items-center gap-2 ...">
           <TagIcon className="w-3.5 h-3.5" />
           {t('actions.manageTags')}
         </button>
       </div>
       ```
       With:
       ```
       <PageHeader
         title={t('title')}
         description={t('stats.summary', { highlightCount: highlights.length, bookCount: stats.uniqueBooks, lastDate: formatDate(stats.lastHighlight) })}
         size="default"
         className="pt-6 pb-2"
         actions={
           <button
             onClick={() => setIsTagManagerOpen(true)}
             className="flex items-center gap-2 px-3 py-1.5 bg-muted hover:bg-accent text-foreground rounded-full text-xs font-medium transition-colors duration-200 border border-transparent hover:border-primary/30"
           >
             <TagIcon className="w-3.5 h-3.5" />
             {t('actions.manageTags')}
           </button>
         }
       />
       ```

    3. Replace `text-[10px]` in table thead (line 448):
       `text-[10px] uppercase tracking-wider` -> `text-overline uppercase tracking-wider`
       (text-overline already includes the 10px size; adding uppercase and tracking-wider is fine for emphasis)

    4. Replace `text-[10px]` in bulk actions (line 254):
       `text-[10px]` -> `text-overline`

    5. Replace `text-[10px]` in bulk delete button (line 285):
       `text-[10px]` -> `text-overline`

    **KEEP all w-[Npx] column widths** (w-[40px], w-[180px], w-[280px], w-[140px], w-[80px], w-[90px]) -- these are intentional responsive table column widths, not typography.

    Do NOT restructure the table to use DataTable -- it requires selection checkboxes, sorting, and custom column widths that DataTable does not support.
    Do NOT change the toolbar, filter popovers, or pagination.
  </action>
  <verify>
    Grep pages/Highlights.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep pages/Highlights.tsx for `text-3xl` -- should find zero occurrences (header replaced).
    Grep pages/Highlights.tsx for `PageHeader` -- should find 1 import + 1 usage.
    Grep pages/Highlights.tsx for `w-\[` -- should still find column width definitions (preserved).
  </verify>
  <done>Highlights.tsx uses PageHeader with size='default' and actions slot. All arbitrary text sizes replaced. Custom table structure preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate HighlightTableRow.tsx arbitrary values</name>
  <files>components/HighlightTableRow.tsx</files>
  <action>
    1. Replace `text-[11px]` (line 72, book author text):
       `text-[11px] text-muted-foreground` -> `text-overline text-muted-foreground`
       (11px has no exact token; 10px text-overline is closer to the "tiny metadata" intent than 12px text-caption)

    2. Replace `text-[10px]` (line 102, "Add note" button):
       `text-[10px] text-muted-foreground/50` -> `text-overline text-muted-foreground/50`

    3. Replace `text-[11px]` (line 117, date column):
       `text-[11px] font-medium` -> `text-overline font-medium`

    **KEEP all w-[Npx] column widths** (w-[40px], w-[180px], w-[280px], w-[140px], w-[80px], w-[90px]) -- paired with Highlights.tsx table headers.

    Do NOT change the checkbox styling, tag selector integration, or study status badge usage.
  </action>
  <verify>
    Grep components/HighlightTableRow.tsx for `text-\[\d+px\]` -- should find zero occurrences.
    Grep components/HighlightTableRow.tsx for `text-overline` -- should find 3 occurrences.
    Grep components/HighlightTableRow.tsx for `w-\[` -- should still find column width definitions (preserved).
  </verify>
  <done>HighlightTableRow.tsx has zero arbitrary text-[Npx] values. All 3 instances replaced with text-overline. Column widths preserved.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` shows no new errors in Highlights.tsx or HighlightTableRow.tsx
- Zero `text-[Npx]` remain in either file (only w-[Npx] column widths remain, intentional)
- PageHeader integrated in Highlights.tsx with actions slot containing the Manage Tags button
- Custom table structure fully preserved
</verification>

<success_criteria>
- Highlights.tsx: PageHeader with actions, 3 arbitrary text values replaced
- HighlightTableRow.tsx: 3 arbitrary text values replaced
- Custom table structure preserved (selection, sorting, column widths)
- Both files compile with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-page-migration/06-05-SUMMARY.md`
</output>
