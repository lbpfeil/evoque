---
phase: 04-token-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [index.css, tailwind.config.js]
autonomous: true

must_haves:
  truths:
    - "Typography has exactly 6 named semantic sizes available as Tailwind utilities (text-display, text-title, text-heading, text-body, text-caption, text-overline)"
    - "Spacing has 8 semantic tokens on 4px grid available as Tailwind utilities (p-xxs, gap-md, m-xl, etc.)"
    - "Border-radius has exactly 3 values (sm, md, lg) mapped to CSS variables"
    - "Shadows have exactly 3 elevations (shadow-sm, shadow-md, shadow-lg)"
    - "Motion tokens provide 3 durations (duration-fast, duration-base, duration-slow) and 3 easings (ease-in, ease-out, ease-in-out) as CSS custom properties"
    - "Icon sizes have 3 named values available as width/height utilities (w-icon-sm, h-icon-sm, etc.)"
    - "Z-index has 7 semantic layers with clear hierarchy (z-dropdown through z-tooltip)"
  artifacts:
    - path: "index.css"
      provides: "All CSS custom properties for design tokens"
      contains: "--text-display, --space-xxs, --duration-fast, --z-dropdown"
    - path: "tailwind.config.js"
      provides: "Tailwind theme.extend mapping CSS vars to utility classes"
      contains: "fontSize, spacing, transitionDuration, transitionTimingFunction, zIndex, width, height"
  key_links:
    - from: "index.css"
      to: "tailwind.config.js"
      via: "CSS variables referenced in theme.extend"
      pattern: "var\\(--"
---

<objective>
Define the complete design token vocabulary as CSS custom properties in index.css and map them to Tailwind utility classes in tailwind.config.js. This covers requirements TOKENS-01 through TOKENS-07: typography (6 sizes), spacing (8 tokens), border-radius (3 values), shadows (3 elevations), motion (3 durations + 3 easings), icon sizes (3 sizes), and z-index (7 layers).

Purpose: Make every visual decision a lookup, not a judgment call. Once these tokens exist as utilities, Phase 5 and Phase 6 can systematically replace ad-hoc values.
Output: Updated index.css with CSS custom properties and updated tailwind.config.js with theme.extend mappings. No component or page changes.
</objective>

<execution_context>
@C:\Users\lbp80\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lbp80\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-token-foundation/04-RESEARCH.md
@index.css
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS custom properties for all design tokens to index.css</name>
  <files>index.css</files>
  <action>
Add the following CSS custom properties inside the existing `:root` block in the `@layer base` section of index.css. Place them AFTER the existing `--radius: 0.75rem;` line and BEFORE the `--font-sans` line. Group with clear comments.

**Typography Scale (TOKENS-01) -- 6 named sizes:**
```
--text-display: 2rem;        /* 32px - Hero text, rare */
--text-title: 1.875rem;      /* 30px - Page titles (text-3xl equivalent) */
--text-heading: 1.125rem;    /* 18px - Section headings (text-lg equivalent) */
--text-body: 0.875rem;       /* 14px - Default body text (text-sm equivalent) */
--text-caption: 0.75rem;     /* 12px - Metadata, labels (text-xs equivalent) */
--text-overline: 0.625rem;   /* 10px - Tiny labels, uppercase (text-[10px] equivalent) */
```

**Spacing Scale (TOKENS-02) -- 8 semantic tokens on 4px grid:**
```
--space-xxs: 0.25rem;   /* 4px */
--space-xs: 0.5rem;     /* 8px */
--space-sm: 0.75rem;    /* 12px */
--space-md: 1rem;       /* 16px */
--space-lg: 1.5rem;     /* 24px */
--space-xl: 2rem;       /* 32px */
--space-2xl: 3rem;      /* 48px */
--space-3xl: 4rem;      /* 64px */
```

**Shadow Scale (TOKENS-04) -- 3 elevations:**
```
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
```

**Motion Tokens (TOKENS-05) -- 3 durations + 3 easings:**
```
--duration-fast: 150ms;
--duration-base: 200ms;
--duration-slow: 300ms;
--ease-in: cubic-bezier(0.4, 0, 1, 1);
--ease-out: cubic-bezier(0, 0, 0.2, 1);
--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
```

**Z-Index Layers (TOKENS-07) -- 7 semantic layers:**
```
--z-base: 0;
--z-dropdown: 1000;
--z-sticky: 1020;
--z-fixed: 1030;
--z-modal-backdrop: 1040;
--z-modal: 1050;
--z-popover: 1060;
--z-tooltip: 1070;
```

**IMPORTANT:** Do NOT add these to the `.dark` block. Typography, spacing, shadows, motion, and z-index do NOT change between themes. The existing border-radius (`--radius`) already handles radius (TOKENS-03) and does not need changes -- it already has exactly the 3 values derived in tailwind.config.js (`sm`, `md`, `lg`). Shadow values may need dark-mode variants later, but for now the same values work in both themes.

Do NOT touch the existing color variables, sidebar variables, chart variables, or any other existing content.
  </action>
  <verify>
Verify index.css contains all custom properties:
- Count 6 `--text-*` properties (display, title, heading, body, caption, overline)
- Count 8 `--space-*` properties (xxs, xs, sm, md, lg, xl, 2xl, 3xl)
- Count 3 `--shadow-*` properties (sm, md, lg)
- Count 3 `--duration-*` properties (fast, base, slow)
- Count 3 `--ease-*` properties (in, out, in-out)
- Count 8 `--z-*` properties (base, dropdown, sticky, fixed, modal-backdrop, modal, popover, tooltip)
- Confirm they are inside `:root` in `@layer base`
- Confirm `.dark` block is unchanged
  </verify>
  <done>index.css contains 31 new CSS custom properties organized by token category, all inside :root, dark block untouched</done>
</task>

<task type="auto">
  <name>Task 2: Map all design tokens in tailwind.config.js theme.extend</name>
  <files>tailwind.config.js</files>
  <action>
Update the `theme.extend` section of tailwind.config.js to map ALL design tokens to Tailwind utility classes. The existing `colors`, `borderRadius`, `fontFamily`, `keyframes`, and `animation` sections stay as-is. ADD the following new sections inside `theme.extend`:

**fontSize (TOKENS-01) -- ADD this section:**
```javascript
fontSize: {
  'display': 'var(--text-display)',
  'title': 'var(--text-title)',
  'heading': 'var(--text-heading)',
  'body': 'var(--text-body)',
  'caption': 'var(--text-caption)',
  'overline': 'var(--text-overline)',
},
```

**spacing (TOKENS-02) -- ADD this section:**
Note: Tailwind's `spacing` key feeds into padding, margin, gap, width, height, etc. automatically. These named keys do NOT conflict with responsive breakpoint prefixes (`sm:`, `md:`, `lg:`) because breakpoints use colon syntax (`sm:p-4`). Tailwind's default spacing scale is all numeric (0, 0.5, 1, 2, ..., 96) so named keys are pure additions. Each Tailwind scale (spacing, fontSize, borderRadius, screens) is independent -- `spacing.sm` only affects `p-sm`, `m-sm`, `gap-sm` etc., never `text-sm` or `rounded-sm`.
```javascript
spacing: {
  'xxs': 'var(--space-xxs)',
  'xs': 'var(--space-xs)',
  'sm': 'var(--space-sm)',
  'md': 'var(--space-md)',
  'lg': 'var(--space-lg)',
  'xl': 'var(--space-xl)',
  '2xl': 'var(--space-2xl)',
  '3xl': 'var(--space-3xl)',
},
```
Result: `p-md` = 16px padding, `gap-lg` = 24px gap, `m-xxs` = 4px margin. Clean, ergonomic, no conflicts. If `npm run build` reveals any issues, fall back to `sp-` prefix.

**boxShadow (TOKENS-04) -- ADD this section:**
```javascript
boxShadow: {
  'sm': 'var(--shadow-sm)',
  'md': 'var(--shadow-md)',
  'lg': 'var(--shadow-lg)',
},
```

**transitionDuration (TOKENS-05) -- ADD this section:**
```javascript
transitionDuration: {
  'fast': 'var(--duration-fast)',
  'base': 'var(--duration-base)',
  'slow': 'var(--duration-slow)',
},
```

**transitionTimingFunction (TOKENS-05) -- ADD this section:**
```javascript
transitionTimingFunction: {
  'ease-in': 'var(--ease-in)',
  'ease-out': 'var(--ease-out)',
  'ease-in-out': 'var(--ease-in-out)',
},
```

**Icon sizes (TOKENS-06) -- ADD inside existing extend, as separate width/height entries:**
```javascript
width: {
  'icon-sm': '0.875rem',
  'icon-md': '1rem',
  'icon-lg': '1.25rem',
},
height: {
  'icon-sm': '0.875rem',
  'icon-md': '1rem',
  'icon-lg': '1.25rem',
},
```
Note: Icon sizes are fixed pixel values (14px, 16px, 20px), not CSS variables, because they don't need to change with theme. Using rem for consistency.

**zIndex (TOKENS-07) -- ADD this section:**
```javascript
zIndex: {
  'base': 'var(--z-base)',
  'dropdown': 'var(--z-dropdown)',
  'sticky': 'var(--z-sticky)',
  'fixed': 'var(--z-fixed)',
  'modal-backdrop': 'var(--z-modal-backdrop)',
  'modal': 'var(--z-modal)',
  'popover': 'var(--z-popover)',
  'tooltip': 'var(--z-tooltip)',
},
```

**Border Radius (TOKENS-03):** Already exists in the config with exactly 3 values (sm, md, lg) derived from `--radius`. No changes needed.

**DO NOT** remove or modify the existing `colors`, `borderRadius`, `fontFamily`, `keyframes`, `animation`, `container`, `darkMode`, `content`, or `plugins` sections.
  </action>
  <verify>
Run `npx tailwindcss --help` to confirm Tailwind CLI is accessible, then run `npm run build` to verify the config is valid and the production build succeeds without errors.

Additionally, verify:
- tailwind.config.js has `fontSize` with 6 entries
- tailwind.config.js has `spacing` with 8 entries
- tailwind.config.js has `boxShadow` with 3 entries
- tailwind.config.js has `transitionDuration` with 3 entries
- tailwind.config.js has `transitionTimingFunction` with 3 entries
- tailwind.config.js has `width` with 3 icon entries
- tailwind.config.js has `height` with 3 icon entries
- tailwind.config.js has `zIndex` with 8 entries
- Existing sections (colors, borderRadius, fontFamily, keyframes, animation) are unchanged
  </verify>
  <done>tailwind.config.js maps all 7 token categories to Tailwind utilities. `npm run build` succeeds. All existing config preserved.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors -- confirms Tailwind config is valid
2. All 6 typography tokens exist as `text-display`, `text-title`, etc. in generated CSS
3. All 8 spacing tokens usable as `p-xxs`, `gap-md`, `m-xl`, etc.
4. Shadow tokens: `shadow-sm`, `shadow-md`, `shadow-lg` available
5. Motion tokens: `duration-fast`, `duration-base`, `duration-slow`, `ease-in`, `ease-out`, `ease-in-out` available
6. Icon tokens: `w-icon-sm`, `w-icon-md`, `w-icon-lg`, `h-icon-sm`, `h-icon-md`, `h-icon-lg` available
7. Z-index tokens: `z-dropdown`, `z-sticky`, `z-fixed`, `z-modal-backdrop`, `z-modal`, `z-popover`, `z-tooltip` available
8. Border-radius unchanged: `rounded-sm`, `rounded-md`, `rounded-lg` still work
9. Existing color system unchanged
10. No visual regressions (app still renders correctly with existing classes)
</verification>

<success_criteria>
- index.css contains 31 new CSS custom properties organized by category
- tailwind.config.js maps all tokens to Tailwind utilities
- `npm run build` succeeds
- All existing functionality preserved (no breaking changes)
- TOKENS-01 through TOKENS-07 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/04-token-foundation/04-01-SUMMARY.md`
</output>
