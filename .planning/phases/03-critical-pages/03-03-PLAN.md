---
phase: 03-critical-pages
plan: 03
type: execute
wave: 1
depends_on: []
files_modified: [components/StudyHeatmap.tsx]
autonomous: false

must_haves:
  truths:
    - "StudyHeatmap container uses bg-card and border-border"
    - "Header text uses text-muted-foreground"
    - "Green heatmap colors are preserved (data visualization)"
    - "Tooltip uses inverted pattern (stays legible in both themes)"
  artifacts:
    - path: "components/StudyHeatmap.tsx"
      provides: "Heatmap with semantic structural tokens"
      contains: "bg-card border-border"
  key_links:
    - from: "components/StudyHeatmap.tsx"
      to: "tailwind semantic tokens"
      via: "CSS class names"
      pattern: "bg-card|border-border|text-muted-foreground"
---

<objective>
Migrate StudyHeatmap.tsx container and text to semantic tokens.

Purpose: StudyHeatmap is a visual component on the Study page - migrating its structural elements completes the Study page migration.
Output: StudyHeatmap.tsx with semantic tokens for container and text while preserving green data visualization colors.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-critical-pages/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate StudyHeatmap structural elements to semantic tokens</name>
  <files>components/StudyHeatmap.tsx</files>
  <action>
Replace hardcoded zinc colors with semantic tokens:

1. Container (line 296):
   - BEFORE: `bg-white dark:bg-zinc-900 rounded border border-zinc-200 dark:border-zinc-800`
   - AFTER: `bg-card rounded border border-border`

2. Header text "Review Activity" (line 299):
   - BEFORE: `text-zinc-600 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

3. Longest streak icon text (line 305):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

4. Day labels (line 321):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

5. Month labels (line 348):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

6. getIntensityClass function (lines 209-222) - update intensity 0 (empty days):
   - BEFORE: `bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700`
   - AFTER: `bg-muted hover:bg-muted/80`

7. Future cells (line 210):
   - BEFORE: `bg-zinc-50 dark:bg-zinc-900/50`
   - AFTER: `bg-muted/50`

IMPORTANT: KEEP the green heatmap colors (green-200, green-400, green-500, green-600, green-900, green-700) - these are intentional data visualization colors showing activity intensity.

IMPORTANT: KEEP the tooltip inverted pattern (line 361-362) - it needs to stand out. The existing `bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900` works well for tooltip visibility.
  </action>
  <verify>Run `npm run build` to confirm no TypeScript errors</verify>
  <done>StudyHeatmap uses semantic tokens for structure while preserving green data viz colors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>StudyHeatmap.tsx migrated to semantic tokens with preserved visualization colors</what-built>
  <how-to-verify>
1. Run `npm run dev`
2. Navigate to http://localhost:3000/#/study
3. Look at the Review Activity heatmap (only visible if you have review history)
4. Verify in LIGHT mode:
   - Heatmap container has card background
   - "Review Activity" header text is visible
   - Day labels (S, M, T...) are visible
   - Month labels are visible
   - Empty cells have subtle muted background
   - Active cells show green gradient (light green to dark green)
5. Toggle to DARK mode and verify:
   - Container adapts to dark card background
   - Text remains readable
   - Green cells are visible against dark background
6. Hover over a cell with activity:
   - Tooltip should be clearly visible (inverted colors)
   - Shows date and review count
  </how-to-verify>
  <resume-signal>Type "approved" to continue to 03-04-PLAN.md, or describe issues for revision</resume-signal>
</task>

</tasks>

<verification>
## Automated Checks

```bash
npm run build
grep -n "bg-white dark:bg-zinc-900\|border-zinc-200 dark:border-zinc-800" components/StudyHeatmap.tsx
# Should return empty for container (line 296)
```

## Visual Verification

- [ ] Heatmap container blends with page in light mode
- [ ] Heatmap container blends with page in dark mode
- [ ] Header text "Review Activity" readable
- [ ] Day labels visible
- [ ] Month labels visible
- [ ] Green activity cells preserved
- [ ] Tooltip visible on hover
</verification>

<success_criteria>
1. StudyHeatmap container uses bg-card border-border
2. Text elements use text-muted-foreground
3. Green data visualization colors preserved
4. Tooltip remains visible in both themes
5. User has approved the visual appearance in both themes
</success_criteria>

<output>
After completion, create `.planning/phases/03-critical-pages/03-03-SUMMARY.md`
</output>
