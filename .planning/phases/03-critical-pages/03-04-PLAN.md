---
phase: 03-critical-pages
plan: 04
type: execute
wave: 2
depends_on: [03-01]
files_modified: [pages/StudySession.tsx]
autonomous: false

must_haves:
  truths:
    - "StudySession container uses bg-background"
    - "Header and footer use border-border"
    - "Back button and icon buttons use semantic tokens"
    - "Progress bar background uses border-border"
  artifacts:
    - path: "pages/StudySession.tsx"
      provides: "StudySession shell (container, header, footer) with semantic tokens"
      contains: "bg-background"
  key_links:
    - from: "pages/StudySession.tsx"
      to: "tailwind semantic tokens"
      via: "CSS class names"
      pattern: "bg-background|border-border|text-muted-foreground"
---

<objective>
Migrate StudySession.tsx container, header, and footer shell to semantic tokens.

Purpose: First step in migrating the complex StudySession page. Focuses on the structural shell while leaving card content and response buttons untouched.
Output: StudySession.tsx with semantic tokens for main container, header with back button, and footer shell.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-critical-pages/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate loading and error states to semantic tokens</name>
  <files>pages/StudySession.tsx</files>
  <action>
Replace hardcoded zinc colors in loading, empty, and error states:

1. Loading state (line 265):
   - BEFORE: `text-zinc-500 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

2. No cards available - main text (line 279):
   - BEFORE: `text-zinc-500 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

3. No cards available - secondary text (line 283):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

4. No cards "Back to Decks" button (line 293):
   - BEFORE: `bg-black text-white rounded-md hover:bg-zinc-800 dark:hover:bg-zinc-800`
   - AFTER: `bg-foreground text-background rounded-md hover:bg-foreground/90`

5. Session complete heading (line 305):
   - BEFORE: `text-zinc-900 dark:text-zinc-100`
   - AFTER: `text-foreground`

6. Session complete labels (lines 308, 313):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

7. Session complete stats (lines 309, 314):
   - BEFORE: `text-zinc-900 dark:text-zinc-100`
   - AFTER: `text-foreground`

8. Session complete divider (line 311):
   - BEFORE: `bg-zinc-200 dark:bg-zinc-800`
   - AFTER: `bg-border`

9. Session complete "Back to Decks" button (line 321):
   - BEFORE: `bg-black text-white rounded-md font-medium hover:bg-zinc-800 dark:hover:bg-zinc-800 shadow-xl shadow-zinc-200/50 dark:shadow-zinc-800/50`
   - AFTER: `bg-foreground text-background rounded-md font-medium hover:bg-foreground/90 shadow-xl shadow-foreground/10`

10. Card error text (line 335):
    - BEFORE: `text-zinc-400 dark:text-zinc-500`
    - AFTER: `text-muted-foreground`

11. Card error "Back to Decks" button (line 341):
    - BEFORE: `bg-black text-white rounded-md hover:bg-zinc-800 dark:hover:bg-zinc-800`
    - AFTER: `bg-foreground text-background rounded-md hover:bg-foreground/90`
  </action>
  <verify>Run `npm run build` to confirm no TypeScript errors</verify>
  <done>Loading, empty, error, and complete states use semantic tokens</done>
</task>

<task type="auto">
  <name>Task 2: Migrate container, header, and footer to semantic tokens</name>
  <files>pages/StudySession.tsx</files>
  <action>
Replace hardcoded zinc colors in the main session shell:

1. Main container (line 353):
   - BEFORE: `bg-white dark:bg-zinc-900`
   - AFTER: `bg-background`

2. Header border (line 355):
   - BEFORE: `border-zinc-200 dark:border-zinc-800`
   - AFTER: `border-border`

3. Back button hover (line 359):
   - BEFORE: `hover:bg-zinc-100 dark:hover:bg-zinc-800`
   - AFTER: `hover:bg-accent`

4. Back arrow icon (line 361):
   - BEFORE: `text-zinc-600 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

5. "Back to Decks" text (line 362):
   - BEFORE: `text-zinc-600 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

6. Card counter text (line 365):
   - BEFORE: `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`

7. Tag button (line 372):
   - BEFORE: `text-zinc-400 dark:text-zinc-500 hover:text-blue-600 ... hover:bg-zinc-100 dark:hover:bg-zinc-800`
   - AFTER: `text-muted-foreground hover:text-primary ... hover:bg-accent`

8. Copy button (line 381):
   - BEFORE: `text-zinc-400 dark:text-zinc-500 hover:text-green-600 ... hover:bg-zinc-100 dark:hover:bg-zinc-800`
   - AFTER: `text-muted-foreground hover:text-green-600 ... hover:bg-accent`
   (Keep green-600 for copy success - intentional color)

9. Delete button (line 388):
   - BEFORE: `text-zinc-400 dark:text-zinc-500 hover:text-red-600 ... hover:bg-zinc-100 dark:hover:bg-zinc-800`
   - AFTER: `text-muted-foreground hover:text-destructive ... hover:bg-accent`

10. Progress bar background (line 397):
    - BEFORE: `bg-zinc-200 dark:bg-zinc-800`
    - AFTER: `bg-border`

11. Footer (line 618):
    - BEFORE: `border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900`
    - AFTER: `border-border bg-background`

12. "Reveal Answer" button (line 625):
    - BEFORE: `bg-black dark:bg-white hover:bg-zinc-800 dark:hover:bg-zinc-200 text-white dark:text-black`
    - AFTER: `bg-foreground hover:bg-foreground/90 text-background`

13. "Reveal Answer" keyboard hint (line 627):
    - BEFORE: `text-zinc-400 dark:text-zinc-500`
    - AFTER: `text-muted-foreground`
  </action>
  <verify>Run `npm run build` to confirm no TypeScript errors</verify>
  <done>Main container, header, and footer use semantic tokens</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>StudySession.tsx shell (container, header, footer) migrated to semantic tokens</what-built>
  <how-to-verify>
1. Run `npm run dev`
2. Navigate to http://localhost:3000/#/study
3. Click "Study All Books" or any book to start a session
4. If no cards due, verify the "No cards available" screen:
   - Text is readable in both themes
   - "Back to Decks" button uses inverted pattern
5. If cards are due, verify the session screen:
   - Header: Back button visible, card counter visible
   - Header icons (tag, copy, delete) visible and hoverable
   - Progress bar has subtle background
   - Footer has subtle border
   - "Reveal Answer" button uses inverted pattern
6. Toggle theme and verify all elements adapt correctly
7. If you complete all cards, verify "Session Complete" screen:
   - Stats are readable
   - Divider is visible
   - "Back to Decks" button uses inverted pattern
  </how-to-verify>
  <resume-signal>Type "approved" to continue to 03-05-PLAN.md, or describe issues for revision</resume-signal>
</task>

</tasks>

<verification>
## Automated Checks

```bash
npm run build
grep -n "bg-white dark:bg-zinc-900" pages/StudySession.tsx
# Should return empty (container migrated)
```

## Visual Verification

- [ ] Loading state text visible in both themes
- [ ] Empty state readable in both themes
- [ ] Session complete stats visible in both themes
- [ ] Header back button hoverable in both themes
- [ ] Header icon buttons hoverable in both themes
- [ ] Progress bar background visible
- [ ] Footer border visible
- [ ] "Reveal Answer" button correct contrast
</verification>

<success_criteria>
1. Main container uses bg-background
2. Header and footer use border-border
3. All "Back to Decks" buttons use inverted pattern
4. Icon buttons use hover:bg-accent
5. User has approved the visual appearance in both themes
</success_criteria>

<output>
After completion, create `.planning/phases/03-critical-pages/03-04-SUMMARY.md`
</output>
