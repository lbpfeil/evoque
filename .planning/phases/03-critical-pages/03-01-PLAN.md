---
phase: 03-critical-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [pages/Study.tsx]
autonomous: false

must_haves:
  truths:
    - "Study.tsx header text uses semantic tokens"
    - "All Books button uses inverted pattern (bg-foreground text-background)"
    - "Loading state uses text-muted-foreground"
    - "Page renders correctly in both light and dark mode"
  artifacts:
    - path: "pages/Study.tsx"
      provides: "Study page with semantic tokens for header and button"
      contains: "bg-foreground text-background"
  key_links:
    - from: "pages/Study.tsx"
      to: "tailwind semantic tokens"
      via: "CSS class names"
      pattern: "text-foreground|text-muted-foreground|bg-foreground"
---

<objective>
Migrate Study.tsx header and All Books button to semantic tokens.

Purpose: First step in Phase 3 - establishes the inverted button pattern and header styling that will be reused throughout the Study pages.
Output: Study.tsx with semantic color tokens for header text and prominent All Books button.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-critical-pages/03-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate header and loading state to semantic tokens</name>
  <files>pages/Study.tsx</files>
  <action>
Replace hardcoded zinc colors with semantic tokens:

1. Loading state (line 15):
   - BEFORE: `text-zinc-500 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

2. Page header h1 (line 44):
   - BEFORE: `text-zinc-900 dark:text-zinc-100`
   - AFTER: `text-foreground`

3. Subtitle paragraph (line 45):
   - BEFORE: `text-zinc-500 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

4. Section header "Study by Book" (line 103):
   - BEFORE: `text-zinc-600 dark:text-zinc-400`
   - AFTER: `text-muted-foreground`

5. Empty state text (lines 109-110):
   - BEFORE: `text-zinc-500 dark:text-zinc-400` and `text-zinc-400 dark:text-zinc-500`
   - AFTER: `text-muted-foreground`
  </action>
  <verify>Run `npm run build` to confirm no TypeScript errors</verify>
  <done>All header and body text uses semantic tokens instead of hardcoded zinc colors</done>
</task>

<task type="auto">
  <name>Task 2: Migrate All Books button to inverted pattern</name>
  <files>pages/Study.tsx</files>
  <action>
Replace the All Books button colors using the established inverted pattern from Phase 2-02:

1. Main button classes (line 58):
   - BEFORE: `bg-black dark:bg-white hover:bg-zinc-800 dark:hover:bg-zinc-200 text-white dark:text-black`
   - AFTER: `bg-foreground hover:bg-foreground/90 text-background`

2. Icon background (line 61):
   - BEFORE: `bg-white/10 dark:bg-black/10`
   - AFTER: `bg-background/10`

3. Subtitle text in button (line 68):
   - BEFORE: `text-white/70 dark:text-black/70`
   - AFTER: `text-background/70`

4. Due count labels (lines 75, 83, 87, 91, 96):
   - BEFORE: `text-white/50 dark:text-black/50`
   - AFTER: `text-background/50`

IMPORTANT: Keep the stats colors (blue-300/700, amber-300/700, green-300/700) for New/Learning/Review - these are SRS-meaningful colors and should NOT become semantic tokens.
  </action>
  <verify>Run `npm run dev` and visually inspect the All Books button in both themes</verify>
  <done>All Books button uses inverted pattern while preserving SRS-meaningful stat colors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Study.tsx header and All Books button migrated to semantic tokens</what-built>
  <how-to-verify>
1. Run `npm run dev`
2. Navigate to http://localhost:3000/#/study
3. Verify header text is visible and well-contrasted
4. Verify "Study All Books" button:
   - Light mode: Dark button with light text
   - Dark mode: Light button with dark text
5. Toggle theme using Sidebar theme toggle
6. Verify blue/amber/green stat colors remain distinct (not semantic)
7. Verify empty state text (if no books) is readable
  </how-to-verify>
  <resume-signal>Type "approved" to continue to 03-02-PLAN.md, or describe issues for revision</resume-signal>
</task>

</tasks>

<verification>
## Automated Checks

```bash
npm run build
grep -n "text-zinc-900\|text-zinc-500\|text-zinc-400\|text-zinc-600" pages/Study.tsx | grep -v "stats"
# Should return empty (no hardcoded text colors except in stats section)
```

## Visual Verification

- [ ] Header text visible in light mode
- [ ] Header text visible in dark mode
- [ ] All Books button contrast correct in light mode
- [ ] All Books button contrast correct in dark mode
- [ ] Stat colors (blue/amber/green) preserved
</verification>

<success_criteria>
1. Study.tsx header uses text-foreground and text-muted-foreground
2. All Books button uses bg-foreground/text-background pattern
3. No hardcoded zinc colors in header/button sections (stats excluded)
4. User has approved the visual appearance in both themes
</success_criteria>

<output>
After completion, create `.planning/phases/03-critical-pages/03-01-SUMMARY.md`
</output>
