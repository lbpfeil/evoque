---
phase: 08-token-consumption
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - pages/Highlights.tsx
  - pages/Dashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Highlights page has zero raw numeric spacing -- all use semantic tokens"
    - "Highlights page has zero raw text-sm/text-xs -- all use text-body/text-caption"
    - "Highlights page raw colors replaced with semantic equivalents"
    - "Dashboard page has zero raw numeric spacing -- all use semantic tokens"
    - "Dashboard page has zero raw typography sizes"
    - "Both pages build and render without visual breakage"
  artifacts:
    - path: "pages/Highlights.tsx"
      provides: "Highlights page with full semantic token consumption"
      contains: "p-md|gap-sm|text-body|text-caption"
    - path: "pages/Dashboard.tsx"
      provides: "Dashboard page with full semantic token consumption"
      contains: "p-md|gap-sm|text-body|text-caption"
  key_links:
    - from: "tailwind.config.js spacing"
      to: "pages/Highlights.tsx"
      via: "semantic spacing tokens"
      pattern: "(p|gap|m[tblrxy]?)-(xxs|xs|sm|md|lg|xl)"
---

<objective>
Migrate Highlights.tsx and Dashboard.tsx from raw Tailwind values to semantic design tokens for spacing, typography, and color.

Purpose: Highlights is the second-highest raw-value page (~69 replacements). Dashboard is low-complexity (~18). Together they complete the remaining pages.
Output: Both pages use exclusively semantic tokens.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-token-consumption/08-RESEARCH.md
@tailwind.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Highlights.tsx to semantic tokens</name>
  <files>pages/Highlights.tsx</files>
  <action>
Replace ALL raw Tailwind values in Highlights.tsx (~561 lines, ~69 raw values) with semantic equivalents.

**Spacing:** Apply standard mapping:
- 1->xxs, 1.5->xs, 2->xs, 2.5->sm, 3->sm, 4->md, 5->lg, 6->lg, 8->xl, 10->2xl, 12->2xl
- Apply to all spacing properties: p, px, py, pt, pb, pl, pr, m, mx, my, mt, mb, ml, mr, gap, space-x, space-y
- Responsive pairs: migrate BOTH variants together (e.g., `px-4 sm:px-6` -> `px-md sm:px-lg`)
- Sub-4px (0.5): KEEP raw

**Typography:**
- `text-xs` -> `text-caption`
- `text-sm` -> `text-body`
- `text-lg` -> `text-heading`

**Colors:**
- `text-green-600 dark:text-green-400` -> `text-success`
- `text-amber-*` / `text-blue-*` tag-related colors -> check if tag token works as text color (`text-tag-global`, `text-tag-book`). If Tailwind resolves them (colors.tag.global/book are defined), use them. If visual mismatch with oklch values, keep raw and document.
- `bg-blue-600` (avatar fallback) -> `bg-primary`
- `text-red-*` -> `text-destructive`

**Important:** Highlights.tsx has many filter/sort UI elements with tight spacing. If replacing a fractional value (1.5, 2.5) creates noticeable density change in compact filter chips or tags, keep the raw value and add a comment: `{/* micro-spacing: sub-grid */}`.
  </action>
  <verify>
Run grep checks:
- `grep -nP "\b(p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|space-[xy])-[0-9]" pages/Highlights.tsx` -- only sub-4px (0.5) allowed
- `grep -n "text-\(sm\|xs\|base\|lg\)" pages/Highlights.tsx` -- zero matches
- `grep -nP "\b(text|bg|border)-(zinc|gray|red|amber|blue|green)-[0-9]+" pages/Highlights.tsx` -- zero or only documented exceptions
- `npm run build` succeeds
  </verify>
  <done>Highlights.tsx uses only semantic tokens. Zero raw spacing (except sub-4px), zero raw typography, zero/minimal raw colors remain.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Dashboard.tsx to semantic tokens</name>
  <files>pages/Dashboard.tsx</files>
  <action>
Replace ALL raw Tailwind values in Dashboard.tsx (~108 lines, ~18 raw values) with semantic equivalents.

**Spacing:** Standard mapping. Dashboard is simple -- mostly grid gaps, padding, and margins.
- Keep `py-20` raw if it exists (loading spinner padding, above token scale of 64px)

**Typography:**
- `text-xs` -> `text-caption`
- `text-sm` -> `text-body`

**Colors:** Audit shows 0 raw color replacements needed for Dashboard.tsx page itself. (DashboardCharts.tsx is a separate component handled in Plan 05.)

**Sub-4px (KEEP raw):** gap-0.5, py-0.5 stay as-is.
  </action>
  <verify>
Run grep checks:
- `grep -nP "\b(p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|space-[xy])-[0-9]" pages/Dashboard.tsx` -- only sub-4px (0.5) and values above 64px (like py-20) allowed
- `grep -n "text-\(sm\|xs\|base\|lg\)" pages/Dashboard.tsx` -- zero matches
- `npm run build` succeeds
  </verify>
  <done>Dashboard.tsx uses only semantic tokens. Zero raw spacing (except sub-4px and above-scale), zero raw typography remain.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build` passes with no new errors
2. All 6 pages now fully migrated (Plans 01-03 cover all pages)
3. Grep across all pages confirms near-zero raw values:
   `grep -rnP "\b(p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|space-[xy])-[0-9]" pages/` -- only documented exceptions
</verification>

<success_criteria>
- Highlights.tsx: ~52 spacing + ~14 typography + ~3 color replacements completed
- Dashboard.tsx: ~11 spacing + ~2 typography replacements completed
- Zero raw values remain except documented exceptions (sub-4px, above-scale, tag color edge cases)
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/08-token-consumption/08-03-SUMMARY.md`
</output>
