---
phase: 13-dashboard-analytics
plan: 04
type: execute
wave: 2
depends_on: ["13-02"]
files_modified:
  - App.tsx
  - components/Sidebar.tsx
  - components/BottomNav.tsx
autonomous: true

must_haves:
  truths:
    - "After login, user lands on Dashboard (not Study)"
    - "Dashboard link appears in sidebar navigation"
    - "Dashboard link appears in mobile bottom navigation"
    - "Old /study route still works"
  artifacts:
    - path: "App.tsx"
      provides: "Dashboard route and default redirect"
      contains: "/dashboard"
    - path: "components/Sidebar.tsx"
      provides: "Dashboard nav item"
      contains: "LayoutDashboard"
    - path: "components/BottomNav.tsx"
      provides: "Dashboard nav item for mobile"
      contains: "/dashboard"
  key_links:
    - from: "App.tsx"
      to: "pages/Dashboard.tsx"
      via: "lazy import and Route"
      pattern: "lazy.*Dashboard"
    - from: "components/Sidebar.tsx"
      to: "/dashboard"
      via: "navItems array"
      pattern: "path.*dashboard"
---

<objective>
Update routing and navigation to make Dashboard the home page after login.

Purpose: Dashboard becomes the first thing users see after login, with quick access to study and other sections.
Output: App.tsx routes to Dashboard by default, Sidebar and BottomNav include Dashboard link.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-dashboard-analytics/13-RESEARCH.md
@.planning/phases/13-dashboard-analytics/13-02-SUMMARY.md

@App.tsx
@components/Sidebar.tsx
@components/BottomNav.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Dashboard route and update default redirect</name>
  <files>App.tsx</files>
  <action>
Update App.tsx to include Dashboard route and change the default landing page:

1. **Add lazy import for Dashboard** (after line 19, with other lazy imports):
```typescript
const Dashboard = lazy(() => import('./pages/Dashboard'));
```

2. **Update Routes** (around line 82-91):
```typescript
<Routes>
  <Route path="/" element={<Navigate to="/dashboard" replace />} />
  <Route path="/dashboard" element={<Dashboard />} />
  <Route path="/highlights" element={<Highlights />} />
  <Route path="/study" element={<Study />} />
  <Route path="/study/session" element={<StudySession />} />
  <Route path="/settings" element={<Settings />} />
  {/* Redirects for old routes */}
  <Route path="/import" element={<Navigate to="/settings" replace />} />
  <Route path="/library" element={<Navigate to="/settings" replace />} />
  <Route path="*" element={<Navigate to="/dashboard" replace />} />
</Routes>
```

Changes from current:
- "/" now redirects to "/dashboard" (was "/study")
- New "/dashboard" route added pointing to Dashboard component
- "*" catch-all now redirects to "/dashboard" (was "/study")
- "/study" route preserved for direct access
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>Dashboard route exists and is the default landing page</done>
</task>

<task type="auto">
  <name>Task 2: Add Dashboard to Sidebar navigation</name>
  <files>components/Sidebar.tsx</files>
  <action>
Update Sidebar.tsx to include Dashboard in the navigation:

1. **Add LayoutDashboard icon import** (around line 3):
```typescript
import { Target, Settings, BookOpen, Highlighter, LogOut, ChevronUp, ChevronLeft, LayoutDashboard } from 'lucide-react';
```

2. **Update navItems array** (around line 31-35):
```typescript
const navItems = [
  { name: t('nav.dashboard'), icon: LayoutDashboard, path: '/dashboard' },
  { name: t('nav.study'), icon: Target, path: '/study' },
  { name: t('nav.highlights'), icon: Highlighter, path: '/highlights' },
  { name: t('nav.settings'), icon: Settings, path: '/settings' },
];
```

Dashboard should be first in the list as it's the home/landing page.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>Sidebar shows Dashboard as first navigation item</done>
</task>

<task type="auto">
  <name>Task 3: Add Dashboard to BottomNav (mobile)</name>
  <files>components/BottomNav.tsx</files>
  <action>
Update BottomNav.tsx to include Dashboard for mobile users:

1. **Add LayoutDashboard icon import** (around line 3):
```typescript
import { Target, Highlighter, LayoutDashboard } from 'lucide-react';
```

2. **Update navItems array** (around line 9-12):
```typescript
const navItems = [
  { name: t('nav.dashboard'), icon: LayoutDashboard, path: '/dashboard' },
  { name: t('nav.study'), icon: Target, path: '/study' },
  { name: t('nav.highlights'), icon: Highlighter, path: '/highlights' },
];
```

Dashboard should be first in the list. Note: Settings is intentionally excluded from mobile bottom nav to keep it minimal.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>BottomNav shows Dashboard as first navigation item on mobile</done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. App starts: `npm run dev`
3. Manual test: Login redirects to Dashboard
4. Manual test: Sidebar shows Dashboard link with LayoutDashboard icon
5. Manual test: Mobile bottom nav shows Dashboard link
6. Manual test: Clicking "Estudar" from Dashboard goes to /study
</verification>

<success_criteria>
- After login, user sees Dashboard (not Study page)
- Sidebar navigation includes Dashboard as first item
- Mobile BottomNav includes Dashboard as first item
- Direct navigation to /study still works
- All navigation uses i18n translations
</success_criteria>

<output>
After completion, create `.planning/phases/13-dashboard-analytics/13-04-SUMMARY.md`
</output>
