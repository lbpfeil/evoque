---
phase: 07-design-guide
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lbp_diretrizes/design-system-guide.md
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "A developer reading only the guide can build a new page matching existing ones without asking questions"
    - "The guide contains every token value, component API, and page layout pattern that exists in the codebase"
    - "The old compact-ui-design-guidelines.md no longer misleads developers (replaced by new guide)"
    - "CLAUDE.md references the new guide, not the old one"
  artifacts:
    - path: "lbp_diretrizes/design-system-guide.md"
      provides: "Complete design system documentation"
      contains: "Token Foundation|Component API|Page Layout"
    - path: "CLAUDE.md"
      provides: "Updated reference to new design guide"
      contains: "design-system-guide.md"
  key_links:
    - from: "CLAUDE.md"
      to: "lbp_diretrizes/design-system-guide.md"
      via: "Reference documentation section"
      pattern: "design-system-guide\\.md"
---

<objective>
Write the definitive Evoque v2.0 Design System Guide and replace the outdated compact-ui-design-guidelines.md.

Purpose: A new developer (or future Claude) can build a page that looks identical to existing ones without asking questions. This is the final phase of the v2.0 Design System Overhaul.

Output: A single comprehensive design guide at `lbp_diretrizes/design-system-guide.md` with all references updated.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-design-guide/07-RESEARCH.md
@lbp_diretrizes/compact-ui-design-guidelines.md
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write the Design System Guide</name>
  <files>lbp_diretrizes/design-system-guide.md</files>
  <action>
Create `lbp_diretrizes/design-system-guide.md` -- the single source of truth for Evoque's visual system.

**Primary source**: Use `07-RESEARCH.md` as the raw material. Every token value, component API, page pattern, and code example in that research file was extracted directly from the codebase. Transform it into a polished, actionable guide.

**Also read these source files directly** to verify accuracy and fill any gaps the research may have missed:
- `index.css` (CSS custom properties in :root)
- `tailwind.config.js` (Tailwind extensions)
- `components/patterns/PageHeader.tsx` (PageHeader API)
- `components/patterns/DataTable.tsx` (DataTable API)
- `components/ui/button.tsx` (Button CVA variants)
- `components/ui/input.tsx` (Input styling)
- `components/ui/badge.tsx` (Badge variants)
- `components/ui/card.tsx` (Card with size prop)
- `components/ui/dialog.tsx` (Dialog/Modal structure)

**Document structure** (in this order):

1. **Header & Purpose** -- What this guide is, when it was last updated, the core design philosophy ("Generous" design language, not "Compact")

2. **Token Architecture** -- The 3-layer system (CSS custom properties -> Tailwind config -> Usage). Explain the pattern once, clearly.

3. **Token Reference Tables** -- One table per token category, exactly matching the values in `index.css` and `tailwind.config.js`:
   - Typography (6 named sizes: display, title, heading, body, caption, overline)
   - Spacing (8 semantic tokens on 4px grid: xxs through 3xl)
   - Border Radius (3 values: sm, md, lg with calc formula)
   - Shadows (3 elevations: sm, md, lg)
   - Motion (3 durations + 3 easings)
   - Icon Sizes (3 fixed rem values: sm, md, lg)
   - Z-Index (7 semantic layers)
   - Colors (core, surface, muted, status, tags, success -- with light/dark oklch values)

4. **Component API Reference** -- For each component, show: props/variants, default values, canonical usage example. Components to document:
   - Button (CVA variants, default = compact)
   - Input (single style, h-8)
   - Badge (CVA variants, pill shape)
   - Card (size prop: default/sm)
   - PageHeader (size prop -- note ALL pages use compact)
   - DataTable (gridCols prop, column definition)
   - Dialog/Modal (canonical 3-section layout: header/body/footer)
   - Sheet (side variants)
   - Select (size prop)
   - Switch (size prop)
   - Tabs (list variants: default/line)
   - Checkbox, Tooltip

5. **Page Layout Patterns** -- The 5 page patterns (A-E) with code templates:
   - A: Spacer Layout (Dashboard)
   - B: Custom Padding (Study, Settings)
   - C: Flex Column (Highlights)
   - D: Full-Screen Immersive (StudySession)
   - E: Centered Auth (Login)
   - App Layout wrapper (Sidebar + main + BottomNav)

6. **Common Patterns** -- Reusable code snippets:
   - StatCard pattern (Dashboard)
   - Toolbar/Filter bar pattern (Highlights)
   - Modal with scrollable body
   - Custom grid table (DeckTable pattern)

7. **Intentional Deviations** -- Table of deliberate exceptions that are NOT bugs (StudySession serif font, Login centered card, heatmap gradients, etc.)

8. **Rules & Anti-Patterns** -- What NOT to do, with "Don't / Do" examples:
   - Never use hardcoded px/rem values (use tokens)
   - Never use raw zinc-*/gray-* classes (use semantic colors)
   - Never use text-lg/text-sm directly (use text-heading/text-body)
   - Never manually size buttons (use CVA variants)
   - Never build custom modals (use Radix Dialog)

9. **Building a New Page** -- Step-by-step recipe: "To add a new page to Evoque, do exactly this..."

10. **Changelog** -- v2.0 (current, with date), brief note about v1.x being superseded

**Writing style:**
- Write in English (the codebase and CLAUDE.md are in English; the old guide was in Portuguese)
- Be direct and specific -- this is a reference document, not a tutorial
- Use code blocks liberally -- show the exact classes/props to use
- Include the "why" for non-obvious decisions (e.g., why compact not default for PageHeader)
- Do NOT use emojis in section headers or anywhere else
- Aim for 400-600 lines. The old guide was 726 lines of mostly wrong information. The new guide should be comprehensive but not bloated.

**After writing the guide**, delete the old file: `lbp_diretrizes/compact-ui-design-guidelines.md`

**Important:** Do NOT change any source code files. This is documentation-only. Read source files for accuracy but write only the guide document.
  </action>
  <verify>
1. File exists at `lbp_diretrizes/design-system-guide.md`
2. Old file `lbp_diretrizes/compact-ui-design-guidelines.md` no longer exists
3. Guide contains all 10 sections listed above
4. Every token value in the guide matches `index.css` :root values
5. Every component API in the guide matches actual component props
6. All 5 page layout patterns (A-E) are documented with code templates
7. Intentional deviations table includes StudySession and Login entries
  </verify>
  <done>A comprehensive design system guide exists that covers tokens, components, page patterns, and anti-patterns. The old guide is deleted. A developer can build a new page by following the guide alone.</done>
</task>

<task type="auto">
  <name>Task 2: Update all references to point to new guide</name>
  <files>CLAUDE.md</files>
  <action>
Update `CLAUDE.md` to reference the new guide instead of the old one. Make these specific changes:

1. **Line ~141** (UI/UX Guidelines section): Change the reference from `lbp_diretrizes/compact-ui-design-guidelines.md` to `lbp_diretrizes/design-system-guide.md`. Update the line count to match the new guide's actual line count.

2. **Lines ~143-163** (Design System v1.1 code block): Replace the entire "Design System v1.1 (Updated 2025-12-30)" section with a brief "Design System v2.0" section that reflects the actual current system. Specifically:
   - Typography: Uses semantic tokens (text-heading, text-body, text-caption, text-overline)
   - Colors: oklch-based semantic tokens (text-foreground, bg-muted, border-border)
   - Spacing: Semantic tokens on 4px grid (gap-sm, p-md, mb-lg)
   - Components: Button default h-8 (compact), Input h-8, PageHeader size="compact"
   - Keep it concise (this is a summary -- the full guide is the reference)

3. **Line ~205** (Reference Documentation): Change the reference from `compact-ui-design-guidelines.md (550 lines)` to `design-system-guide.md` with updated line count.

**Do NOT change any other content in CLAUDE.md.** Only update the three specific areas above.

**Note:** Other files also reference the old guide (TECHNICAL_CONTEXT.md, HighlightTab-context.md, README.md in lbp_context, etc.). Do NOT update those -- they are reference documentation that will be updated separately if needed. The critical update is CLAUDE.md since that is the primary instruction file for Claude Code.
  </action>
  <verify>
1. `grep -r "compact-ui-design-guidelines" CLAUDE.md` returns NO results
2. `grep "design-system-guide" CLAUDE.md` returns at least 2 results (UI/UX section + Reference Documentation section)
3. The Design System summary in CLAUDE.md mentions semantic tokens (text-heading, text-body, etc.) not raw Tailwind classes
4. No other changes to CLAUDE.md beyond the three specified areas
  </verify>
  <done>CLAUDE.md references the new design-system-guide.md in all locations. The outdated v1.1 design summary is replaced with a v2.0 summary reflecting semantic tokens and generous design language.</done>
</task>

</tasks>

<verification>
1. `lbp_diretrizes/design-system-guide.md` exists and is 400-600 lines
2. `lbp_diretrizes/compact-ui-design-guidelines.md` does NOT exist (deleted)
3. CLAUDE.md references `design-system-guide.md` (not compact-ui-design-guidelines)
4. The guide's token values match `index.css` :root declarations
5. The guide's component APIs match actual component source files
6. `npm run build` succeeds (no code was changed, but verify nothing broke)
</verification>

<success_criteria>
- DOC-01 satisfied: Single design guide document exists with token tables, component usage rules, and page layout patterns
- DOC-02 satisfied: Old compact-ui-design-guidelines.md is replaced with guide that has no contradictions with codebase
- Phase 7 goal met: A new developer (or future Claude) can build a page that looks identical to existing ones without asking questions
</success_criteria>

<output>
After completion, create `.planning/phases/07-design-guide/07-01-SUMMARY.md`
</output>
