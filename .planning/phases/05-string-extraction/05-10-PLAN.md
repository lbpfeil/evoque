# Plan: 05-10 Final Validation and Cleanup

---
phase: 05-string-extraction
plan: 10
type: execute
wave: 7
depends_on: [05-01, 05-02, 05-03, 05-04, 05-05, 05-05a, 05-06, 05-06a, 05-07, 05-07a, 05-08, 05-09]
files_modified:
  - public/locales/pt-BR/*.json
autonomous: true

must_haves:
  truths:
    - "All pages display text in Portuguese only"
    - "No translation keys visible in UI"
    - "No console warnings about missing keys"
  artifacts:
    - path: "public/locales/pt-BR/common.json"
      provides: "Valid JSON with no syntax errors"
    - path: "public/locales/pt-BR/auth.json"
      provides: "Valid JSON with no syntax errors"
    - path: "public/locales/pt-BR/highlights.json"
      provides: "Valid JSON with no syntax errors"
  key_links:
    - from: "pages/*.tsx"
      to: "public/locales/pt-BR/*.json"
      via: "useTranslation hook"
      pattern: "useTranslation"
---

<objective>
Final validation pass to ensure all strings are translated, no English text remains in the UI, and translation files are complete and consistent.

Purpose: Validate all TRANS-* requirements pass.
Output: Complete and validated translation coverage
</objective>

<execution_context>
@C:\Users\lbp80\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lbp80\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Search codebase for remaining hardcoded strings</name>
  <files>components/, pages/</files>
  <action>
Search codebase for remaining hardcoded Portuguese strings:
```bash
grep -r "Destaque" components/ pages/ --include="*.tsx"
grep -r "Salvar" components/ pages/ --include="*.tsx"
grep -r "Cancelar" components/ pages/ --include="*.tsx"
grep -r "Excluir" components/ pages/ --include="*.tsx"
grep -r "Voltar" components/ pages/ --include="*.tsx"
```

Search for remaining hardcoded English strings:
```bash
grep -r '"Loading' components/ pages/ --include="*.tsx"
grep -r '"Save"' components/ pages/ --include="*.tsx"
grep -r '"Cancel"' components/ pages/ --include="*.tsx"
grep -r '"Delete"' components/ pages/ --include="*.tsx"
grep -r '"Error"' components/ pages/ --include="*.tsx"
```

Any strings found should be wrapped with t() calls. Fix any missed strings.
  </action>
  <verify>grep -r "Destaque" components/ pages/ --include="*.tsx" | grep -v "t('" | wc -l</verify>
  <done>No hardcoded Portuguese or English strings found in JSX (all wrapped with t())</done>
</task>

<task type="auto">
  <name>Task 2: Validate translation file completeness and JSON syntax</name>
  <files>public/locales/pt-BR/*.json</files>
  <action>
Validate translation file completeness:
- common.json: buttons, nav, labels, sidebar, status
- auth.json: login, signup
- highlights.json: title, filters, table, bulk, pagination, tagManager, editModal
- study.json: title, allBooks, byBook, stats, table, emptyState, emptyDeck
- session.json: loading, noCards, complete, error, progress, actions, rating, keyboard, edit, note, status, deleteCard
- settings.json: title, tabs, import, library, account, preferences, deleteBook
- dashboard.json: title, stats, recentBooks
- errors.json: validation, network, auth, import, upload, tag, book, generic

Final check: Ensure all translation files:
- Have no trailing commas (JSON validation)
- Have consistent formatting
- Have no duplicate keys

Run JSON validation:
```bash
node -e "JSON.parse(require('fs').readFileSync('public/locales/pt-BR/common.json'))"
node -e "JSON.parse(require('fs').readFileSync('public/locales/pt-BR/auth.json'))"
# ... repeat for all files
```
  </action>
  <verify>for f in public/locales/pt-BR/*.json; do node -e "JSON.parse(require('fs').readFileSync('$f'))"; done</verify>
  <done>All translation files are valid JSON with complete key coverage</done>
</task>

<task type="auto">
  <name>Task 3: Manual verification of all pages</name>
  <files>N/A</files>
  <action>
Run the development server and manually verify every page:
1. Login page - verify all text Portuguese
2. Dashboard page - verify all text Portuguese
3. Highlights page - test all filters, table, bulk actions
4. Study page - test deck selection, empty states
5. StudySession - test full session flow, all states
6. Settings - test all 4 tabs thoroughly

Open browser DevTools console and check for:
- Missing translation key warnings (i18next debug mode shows these)
- Any `common:` or other namespace prefixes rendered as text
- Any "undefined" or "null" rendered as text

Test pluralization works correctly:
- "1 destaque" vs "5 destaques"
- "1 livro" vs "5 livros"

Test edge cases:
- Empty states (no books, no highlights, no cards)
- Error states (network error, validation error)
- Loading states
- Session complete state
  </action>
  <verify>npm run dev -- --open</verify>
  <done>All 6 pages verified to display Portuguese text only, no console warnings, pluralization working</done>
</task>

</tasks>

<verification>
- [ ] All pages display text in Portuguese only
- [ ] No English text visible anywhere in UI
- [ ] No translation keys visible (common:buttons.save etc.)
- [ ] No console warnings about missing keys
- [ ] Pluralization works correctly
- [ ] All empty/error/loading states display Portuguese text
- [ ] JSON files are valid (no syntax errors)
</verification>

<success_criteria>
- Complete manual test of all 6 pages
- No hardcoded Portuguese strings in JSX
- No hardcoded English strings in JSX
- All translation files valid JSON
- grep search returns no un-wrapped strings
- TRANS-01 through TRANS-09 requirements all pass
</success_criteria>

<output>
After completion, create `.planning/phases/05-string-extraction/05-10-SUMMARY.md`

## Success Criteria for Phase 5 Completion

When this plan completes successfully, Phase 5 is complete and the following requirements are satisfied:

- TRANS-01: Sidebar strings translated
- TRANS-02: Dashboard strings translated
- TRANS-03: Highlights page strings translated
- TRANS-04: Study page strings translated
- TRANS-05: StudySession strings translated
- TRANS-06: Settings page strings translated
- TRANS-07: Login page strings translated
- TRANS-08: Modal and popover strings translated
- TRANS-09: Error and validation messages translated
</output>
