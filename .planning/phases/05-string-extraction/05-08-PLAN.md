# Plan: 05-08 Modals and Remaining Components

---
phase: 05-string-extraction
plan: 08
type: execute
wave: 6
depends_on: [05-05, 05-06, 05-07]
files_modified:
  - components/HighlightEditModal.tsx
  - components/StudyStatusBadge.tsx
  - public/locales/pt-BR/highlights.json
  - public/locales/pt-BR/common.json
autonomous: true

must_haves:
  truths:
    - "HighlightEditModal displays Portuguese labels"
    - "Learning stats section shows Portuguese labels"
    - "StudyStatusBadge shows translated status text"
  artifacts:
    - path: "components/HighlightEditModal.tsx"
      provides: "HighlightEditModal with useTranslation hook"
      contains: "useTranslation"
    - path: "components/StudyStatusBadge.tsx"
      provides: "StudyStatusBadge with translated labels"
      contains: "useTranslation"
  key_links:
    - from: "components/HighlightEditModal.tsx"
      to: "public/locales/pt-BR/highlights.json"
      via: "useTranslation hook"
      pattern: "t\\(['\"]editModal\\."
---

<objective>
Extract strings from remaining modal components and miscellaneous components.

Purpose: Complete modal and component translation - Requirement TRANS-08.
Output: Fully translated HighlightEditModal.tsx and StudyStatusBadge.tsx
</objective>

<execution_context>
@C:\Users\lbp80\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lbp80\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/HighlightEditModal.tsx
@components/StudyStatusBadge.tsx
@public/locales/pt-BR/highlights.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add useTranslation to HighlightEditModal and replace strings</name>
  <files>components/HighlightEditModal.tsx</files>
  <action>
Import useTranslation in HighlightEditModal.tsx:
```typescript
import { useTranslation } from 'react-i18next';
const { t } = useTranslation('highlights');
```

Replace HighlightEditModal strings:
- "Highlight" label -> t('editModal.highlight')
- "Note" label -> t('editModal.note')
- "Add a note..." placeholder -> t('editModal.notePlaceholder')
- "Learning Stats" -> t('editModal.learningStats')
- "Reps" -> t('editModal.reps')
- "Ease" -> t('editModal.ease')
- "Interval" -> t('editModal.interval')
- "Next" in chart data -> t('editModal.next')

Check if HighlightHistoryModal.tsx exists and extract any strings (review history title, date labels, rating labels).

Check BookContextModal.tsx for any strings (context menu labels, action buttons).
  </action>
  <verify>grep -n "useTranslation" components/HighlightEditModal.tsx && grep -c "t('" components/HighlightEditModal.tsx</verify>
  <done>HighlightEditModal.tsx uses useTranslation, all labels and stats use t() calls</done>
</task>

<task type="auto">
  <name>Task 2: Add useTranslation to StudyStatusBadge and update translation files</name>
  <files>components/StudyStatusBadge.tsx, public/locales/pt-BR/highlights.json, public/locales/pt-BR/common.json</files>
  <action>
Import useTranslation in StudyStatusBadge.tsx if not already done and extract:
- "New" -> Reuse from session namespace or add to common
- "Learning" -> Reuse from session namespace or add to common
- "Review" -> Reuse from session namespace or add to common
- "Due" -> t('common:status.due')
- Any other status labels

Add editModal section to highlights.json (merge with existing):
```json
{
  "editModal": {
    "highlight": "Destaque",
    "note": "Nota",
    "notePlaceholder": "Adicione uma nota...",
    "learningStats": "Estatisticas de Aprendizado",
    "reps": "Reps",
    "ease": "Facilidade",
    "interval": "Intervalo",
    "next": "Proximo"
  }
}
```

Add status section to common.json (merge with existing):
```json
{
  "status": {
    "new": "Novo",
    "learning": "Aprendendo",
    "review": "Revisao",
    "due": "Pendente"
  }
}
```
  </action>
  <verify>grep -n "useTranslation" components/StudyStatusBadge.tsx && npm run dev -- --open</verify>
  <done>StudyStatusBadge.tsx uses useTranslation, translation files updated with modal and status keys</done>
</task>

</tasks>

<verification>
- [ ] HighlightEditModal displays Portuguese labels
- [ ] Learning stats section shows Portuguese labels
- [ ] StudyStatusBadge shows translated status text
- [ ] No hardcoded strings remaining in modal components
- [ ] No console warnings about missing translation keys
</verification>

<success_criteria>
- All modal components use useTranslation
- Stats labels translated
- Status badges translated
- Translation files updated with modal and status keys
</success_criteria>

<output>
After completion, create `.planning/phases/05-string-extraction/05-08-SUMMARY.md`
</output>
