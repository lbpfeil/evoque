# Plan: 05-02 Sidebar and Common Strings

---
phase: 05-string-extraction
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/Sidebar.tsx
  - components/BottomNav.tsx
  - public/locales/pt-BR/common.json
autonomous: true

must_haves:
  truths:
    - "Sidebar displays navigation labels in Portuguese"
    - "Mobile bottom nav displays labels in Portuguese"
    - "Logout button shows 'Sair'"
  artifacts:
    - path: "components/Sidebar.tsx"
      provides: "Sidebar with useTranslation hook"
      contains: "useTranslation('common')"
    - path: "components/BottomNav.tsx"
      provides: "BottomNav with useTranslation hook"
      contains: "useTranslation('common')"
    - path: "public/locales/pt-BR/common.json"
      provides: "Portuguese translations for common namespace"
      contains: "nav"
  key_links:
    - from: "components/Sidebar.tsx"
      to: "public/locales/pt-BR/common.json"
      via: "useTranslation hook"
      pattern: "t\\(['\"]nav\\."
---

<objective>
Extract navigation strings from Sidebar and BottomNav components using the common namespace.

Purpose: These are shared UI elements visible on every page - Requirement TRANS-01.
Output: Fully translated Sidebar.tsx and BottomNav.tsx with strings in common.json
</objective>

<execution_context>
@C:\Users\lbp80\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lbp80\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@components/Sidebar.tsx
@components/BottomNav.tsx
@public/locales/pt-BR/common.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add useTranslation to Sidebar and replace all strings</name>
  <files>components/Sidebar.tsx</files>
  <action>
Import useTranslation hook in Sidebar.tsx:
```typescript
import { useTranslation } from 'react-i18next';
```
Add hook call inside component:
```typescript
const { t } = useTranslation('common');
```

Replace Sidebar navigation labels. The navItems array should use t():
```typescript
const navItems = [
  { name: t('nav.dashboard'), icon: LayoutDashboard, path: '/' },
  { name: t('nav.highlights'), icon: Highlighter, path: '/highlights' },
  { name: t('nav.study'), icon: Target, path: '/study' },
  { name: t('nav.settings'), icon: Settings, path: '/settings' },
];
```

Replace remaining Sidebar strings:
- "Kindle Mgr." -> Keep as-is (brand name, don't translate)
- "Recolher sidebar" / "Expandir sidebar" aria-labels -> t('sidebar.collapse') / t('sidebar.expand')
- "Sair" (logout button) -> t('sidebar.logout')
- "Free Plan" -> t('sidebar.freePlan')
- "User" fallback -> t('sidebar.defaultUser')
  </action>
  <verify>grep -n "useTranslation" components/Sidebar.tsx && grep -c "t('" components/Sidebar.tsx</verify>
  <done>Sidebar.tsx uses useTranslation, all nav items and labels use t() calls</done>
</task>

<task type="auto">
  <name>Task 2: Add useTranslation to BottomNav and update common.json</name>
  <files>components/BottomNav.tsx, public/locales/pt-BR/common.json</files>
  <action>
Import useTranslation hook in BottomNav.tsx and replace strings:
```typescript
const navItems = [
  { name: t('nav.home'), icon: LayoutDashboard, path: '/' },
  { name: t('nav.study'), icon: Target, path: '/study' },
];
```

Update public/locales/pt-BR/common.json with all new keys:
```json
{
  "nav": {
    "dashboard": "Dashboard",
    "highlights": "Destaques",
    "study": "Estudar",
    "settings": "Configuracoes",
    "home": "Inicio"
  },
  "sidebar": {
    "collapse": "Recolher sidebar",
    "expand": "Expandir sidebar",
    "logout": "Sair",
    "freePlan": "Free Plan",
    "defaultUser": "Usuario"
  },
  "buttons": {
    "add": "Adicionar",
    "cancel": "Cancelar",
    "confirm": "Confirmar",
    "delete": "Excluir",
    "save": "Salvar"
  }
}
```
  </action>
  <verify>grep -n "useTranslation" components/BottomNav.tsx && npm run dev -- --open</verify>
  <done>BottomNav.tsx uses useTranslation, common.json contains nav and sidebar sections, navigation renders in Portuguese</done>
</task>

</tasks>

<verification>
- [ ] Sidebar displays navigation labels in Portuguese
- [ ] BottomNav displays labels in Portuguese
- [ ] Logout button shows "Sair"
- [ ] No console warnings about missing translation keys
- [ ] common.json contains all nav and sidebar keys
</verification>

<success_criteria>
- useTranslation hook used in both Sidebar.tsx and BottomNav.tsx
- All nav items use t() for labels
- Accessibility labels (aria-label, title) translated
- common.json updated with nav and sidebar sections
</success_criteria>

<output>
After completion, create `.planning/phases/05-string-extraction/05-02-SUMMARY.md`
</output>
