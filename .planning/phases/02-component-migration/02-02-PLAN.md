---
phase: 02-component-migration
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - pages/Login.tsx
  - pages/Dashboard.tsx
  - components/DashboardCharts.tsx
autonomous: true

must_haves:
  truths:
    - "Login page renders correctly in both light and dark mode"
    - "Dashboard StatCards use shadcn Card component"
    - "Dashboard page has no hardcoded zinc-* colors"
    - "Login page has no hardcoded blue-* or gradient colors that break in dark mode"
    - "App.tsx uses semantic tokens (verified from Phase 1)"
    - "Sidebar.tsx uses semantic tokens (verified from Phase 1)"
    - "ThemeToggle is present in Sidebar (verified from Phase 1)"
  artifacts:
    - path: "pages/Login.tsx"
      provides: "Login page with semantic tokens"
      contains: "bg-background"
    - path: "pages/Dashboard.tsx"
      provides: "Dashboard with shadcn Card"
      contains: "Card, CardContent, CardHeader"
    - path: "App.tsx"
      provides: "App layout with semantic tokens"
      contains: "bg-background text-foreground"
    - path: "components/Sidebar.tsx"
      provides: "Sidebar with semantic tokens and ThemeToggle"
      contains: "bg-sidebar"
  key_links:
    - from: "pages/Dashboard.tsx"
      to: "components/ui/card"
      via: "import statement"
      pattern: "from.*components/ui/card"
    - from: "components/Sidebar.tsx"
      to: "components/ThemeToggle"
      via: "import statement"
      pattern: "ThemeToggle"
---

<objective>
Migrate Login and Dashboard pages to use semantic color tokens and shadcn components. Also verify Phase 1 completions for App.tsx, Sidebar.tsx, and ThemeToggle integration.

Purpose: These are the simplest pages (117 and 98 lines respectively) - perfect starting points for page migration pattern establishment. The Phase 1 verification confirms requirement traceability.

Output: Two fully theme-aware pages that render correctly in both light and dark mode, plus documented verification of Phase 1 work.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-component-migration/02-RESEARCH.md

# Page files to migrate
@pages/Login.tsx
@pages/Dashboard.tsx

# Phase 1 files to verify
@App.tsx
@components/Sidebar.tsx
@components/ThemeToggle.tsx

# shadcn Card component
@components/ui/card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify Phase 1 completions (COLOR-03, PAGE-06, COMP-02)</name>
  <files>App.tsx, components/Sidebar.tsx, components/ThemeToggle.tsx</files>
  <action>
  Verify that Phase 1 work satisfies these requirements:

  **COLOR-03 (App.tsx semantic tokens):**
  Run: `grep -n "zinc-\|blue-[0-9]" App.tsx`
  Expected: No output (no hardcoded colors)
  Run: `grep -n "bg-background\|text-foreground\|text-primary\|text-muted-foreground" App.tsx`
  Expected: Multiple matches showing semantic token usage

  **PAGE-06 (Sidebar.tsx semantic tokens):**
  Run: `grep -n "zinc-" components/Sidebar.tsx`
  Expected: No output (no hardcoded colors)
  Run: `grep -n "bg-sidebar\|border-sidebar\|text-sidebar" components/Sidebar.tsx`
  Expected: Multiple matches showing semantic token usage

  **COMP-02 (ThemeToggle in Sidebar):**
  Run: `grep -n "ThemeToggle" components/Sidebar.tsx`
  Expected: Shows import and usage of ThemeToggle component

  Document verification results in SUMMARY.md with explicit requirement mapping:
  - COLOR-03: VERIFIED - App.tsx uses semantic tokens
  - PAGE-06: VERIFIED - Sidebar.tsx uses semantic tokens
  - COMP-02: VERIFIED - ThemeToggle integrated in Sidebar

  If any verification fails, create follow-up task. Otherwise mark as pre-completed by Phase 1.
  </action>
  <verify>
  - Grep commands return expected results
  - Each requirement status documented
  </verify>
  <done>
  - COLOR-03 verified as complete (or gap identified)
  - PAGE-06 verified as complete (or gap identified)
  - COMP-02 verified as complete (or gap identified)
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Login.tsx to semantic tokens</name>
  <files>pages/Login.tsx</files>
  <action>
  Replace all hardcoded colors with semantic tokens:

  **Line 33 - Main container:**
  ```tsx
  // REPLACE
  className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50"
  // WITH
  className="min-h-screen flex items-center justify-center bg-background"
  ```

  **Line 37 - Logo icon container:**
  ```tsx
  // REPLACE
  className="p-2 bg-black text-white rounded-lg"
  // WITH
  className="p-2 bg-foreground text-background rounded-lg"
  ```
  Note: This keeps the inverted contrast effect but makes it theme-aware.

  **Line 44 - Card container:**
  ```tsx
  // REPLACE
  className="bg-white rounded-2xl shadow-xl border border-zinc-200 p-6 sm:p-8"
  // WITH
  className="bg-card rounded-2xl shadow-xl border border-border p-6 sm:p-8"
  ```

  **Line 45 - Card heading:**
  ```tsx
  // REPLACE
  className="text-xl font-semibold text-zinc-900 mb-4 sm:mb-6"
  // WITH
  className="text-xl font-semibold text-card-foreground mb-4 sm:mb-6"
  ```

  **Lines 50-53 - Error alert:**
  ```tsx
  // REPLACE
  className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"
  // WITH
  className="mb-4 p-3 bg-destructive/10 border border-destructive/30 rounded-lg flex items-start gap-2"
  ```
  Also update the error text (line 52):
  ```tsx
  // REPLACE
  className="text-sm text-red-800"
  // WITH
  className="text-sm text-destructive"
  ```

  **Lines 58, 72 - Form labels:**
  ```tsx
  // REPLACE
  className="block text-sm font-medium text-zinc-700 mb-1.5"
  // WITH
  className="block text-sm font-medium text-foreground mb-1.5"
  ```

  **Lines 65, 79 - Form inputs:**
  ```tsx
  // REPLACE
  className="w-full px-3 py-2.5 sm:py-2 border border-zinc-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
  // WITH
  className="w-full px-3 py-2.5 sm:py-2 border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent"
  ```

  **Lines 86-89 - Submit button:**
  ```tsx
  // REPLACE
  className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 sm:py-2.5 min-h-[44px] rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
  // WITH
  className="w-full bg-primary hover:bg-primary/90 text-primary-foreground font-medium py-3 sm:py-2.5 min-h-[44px] rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
  ```

  **Lines 97-103 - Toggle button:**
  ```tsx
  // REPLACE
  className="text-sm text-blue-600 hover:text-blue-700 font-medium"
  // WITH
  className="text-sm text-primary hover:text-primary/80 font-medium transition-colors duration-200"
  ```

  **Line 109 - Footer text:**
  ```tsx
  // REPLACE
  className="text-center text-xs text-zinc-500 mt-6"
  // WITH
  className="text-center text-xs text-muted-foreground mt-6"
  ```
  </action>
  <verify>
  - Run: `npm run build` (no errors)
  - Grep: `grep -n "zinc-\|blue-\|gradient" pages/Login.tsx` returns empty
  - Visual: Open /login, toggle theme - page should look correct in both modes
  </verify>
  <done>
  - Login.tsx has 0 hardcoded zinc-*, blue-*, or gradient colors
  - Uses semantic tokens throughout
  - Renders correctly in both light and dark mode
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate Dashboard.tsx to semantic tokens with shadcn Card</name>
  <files>pages/Dashboard.tsx</files>
  <action>
  **Add import for shadcn Card (after existing imports):**
  ```tsx
  import { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';
  ```

  **Add proper TypeScript interface for StatCard props (before StatCard component):**
  ```tsx
  interface StatCardProps {
    title: string;
    value: string | number;
    icon: React.ComponentType<{ className?: string }>;
  }
  ```

  **Replace entire StatCard component (lines 8-16):**
  ```tsx
  const StatCard = ({ title, value, icon: Icon }: StatCardProps) => (
    <Card className="hover:border-primary/30 transition-colors duration-200">
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-xs font-medium uppercase tracking-wider text-muted-foreground">
          {title}
        </CardTitle>
        <Icon className="w-5 h-5 text-muted-foreground" />
      </CardHeader>
      <CardContent>
        <p className="text-3xl font-bold tracking-tight">{value}</p>
      </CardContent>
    </Card>
  );
  ```

  **Line 35 - Page heading:**
  ```tsx
  // REPLACE
  className="text-3xl font-bold text-zinc-900 tracking-tight"
  // WITH
  className="text-3xl font-bold text-foreground tracking-tight"
  ```

  **Line 36 - Page subheading:**
  ```tsx
  // REPLACE
  className="text-zinc-500 mt-2 font-light"
  // WITH
  className="text-muted-foreground mt-2 font-light"
  ```

  **Line 66 - Loader icon:**
  ```tsx
  // REPLACE
  className="w-8 h-8 text-zinc-400 animate-spin"
  // WITH
  className="w-8 h-8 text-muted-foreground animate-spin"
  ```

  **Line 75 - Recent Books heading:**
  ```tsx
  // REPLACE
  className="text-lg font-bold text-zinc-900"
  // WITH
  className="text-lg font-bold text-foreground"
  ```

  **Lines 79-91 - Book cards:**
  ```tsx
  // REPLACE entire book card div (line 79)
  className="bg-white p-4 rounded-md border border-zinc-200 flex gap-5 hover:border-zinc-300 transition-colors"
  // WITH
  className="bg-card p-4 rounded-md border border-border flex gap-5 hover:border-primary/30 transition-colors duration-200"
  ```

  **Line 80 - Book cover container:**
  ```tsx
  // REPLACE
  className="w-16 h-24 bg-zinc-100 rounded-sm overflow-hidden flex-shrink-0 border border-zinc-100"
  // WITH
  className="w-16 h-24 bg-muted rounded-sm overflow-hidden flex-shrink-0 border border-border"
  ```

  **Line 84 - Book title:**
  ```tsx
  // REPLACE
  className="font-semibold text-zinc-900 line-clamp-2 leading-tight mb-1"
  // WITH
  className="font-semibold text-card-foreground line-clamp-2 leading-tight mb-1"
  ```

  **Line 85 - Book author:**
  ```tsx
  // REPLACE
  className="text-sm text-zinc-500 mb-3"
  // WITH
  className="text-sm text-muted-foreground mb-3"
  ```

  **Lines 86-88 - Highlight count badge:**
  ```tsx
  // REPLACE
  className="text-xs bg-zinc-100 text-zinc-600 px-2 py-1 rounded-sm border border-zinc-200 w-fit font-medium"
  // WITH
  className="text-xs bg-muted text-muted-foreground px-2 py-1 rounded-sm border border-border w-fit font-medium"
  ```
  </action>
  <verify>
  - Run: `npm run build` (no errors)
  - Grep: `grep -n "zinc-" pages/Dashboard.tsx` returns empty
  - Visual: Open /, toggle theme - dashboard should look correct in both modes
  </verify>
  <done>
  - Dashboard.tsx has 0 hardcoded zinc-* colors
  - StatCard uses shadcn Card component
  - Uses semantic tokens throughout
  - Renders correctly in both light and dark mode
  </done>
</task>

</tasks>

<verification>
Run after all tasks complete:

```bash
# Verify Phase 1 completions (Task 1)
grep -n "zinc-\|blue-[0-9]" App.tsx
grep -n "zinc-" components/Sidebar.tsx
grep -n "ThemeToggle" components/Sidebar.tsx

# Verify no hardcoded colors remain in migrated pages
grep -rn "zinc-\|blue-600\|gradient" pages/Login.tsx pages/Dashboard.tsx

# Expected: No output

# Verify Card import exists
grep -n "from.*ui/card" pages/Dashboard.tsx

# Expected: Shows import line

# Build check
npm run build

# Visual verification
npm run dev
# Check Login page: /login (or /#/login with HashRouter)
# Check Dashboard: / (or /#/)
# Toggle theme - both pages should render correctly
```
</verification>

<success_criteria>
- Phase 1 requirements verified: COLOR-03, PAGE-06, COMP-02
- Login.tsx has 0 hardcoded color references (zinc-*, blue-*, gradient)
- Dashboard.tsx has 0 hardcoded zinc-* colors
- Dashboard uses shadcn Card component for StatCards
- Both pages render correctly in light and dark mode
- No TypeScript errors on build
</success_criteria>

<output>
After completion, create `.planning/phases/02-component-migration/02-02-SUMMARY.md`

Include explicit verification results for:
- COLOR-03: App.tsx semantic tokens
- PAGE-06: Sidebar.tsx semantic tokens
- COMP-02: ThemeToggle in Sidebar
</output>
