# Milestone v2.0: Design System Overhaul

**Status:** SHIPPED 2026-01-29
**Phases:** 4-10
**Total Plans:** 24

## Overview

v1.0 shipped a working theme system but no governing design system -- the result is two design languages coexisting accidentally (Compact vs Generous). v2.0 resolves this by picking the winner (Generous), encoding it into rigid design tokens, standardizing every component against those tokens, migrating all 7 pages to canonical patterns, and documenting the final system in a single concise guide. The goal is Apple-level visual uniformity: zero surprises across any page.

## Phases

### Phase 4: Token Foundation
**Goal**: Every visual decision has exactly one correct answer encoded in the design system
**Depends on**: v1.0 complete (Phases 1-3)
**Requirements**: TOKENS-01, TOKENS-02, TOKENS-03, TOKENS-04, TOKENS-05, TOKENS-06, TOKENS-07, TOKENS-08
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md -- Define CSS custom properties and Tailwind config for all token scales (typography, spacing, radius, shadows, motion, icons, z-index)
- [x] 04-02-PLAN.md -- Audit raw color classes and define semantic replacements (status tokens + migration map)

**Completed:** 2026-01-27

### Phase 5: Component Standardization
**Goal**: Every shadcn component has one canonical way to be used, and new composition components exist for repeated patterns
**Depends on**: Phase 4
**Requirements**: COMP-01, COMP-02, COMP-03, COMP-04
**Plans**: 2 plans

Plans:
- [x] 05-01-PLAN.md -- Fix shadcn component CVA defaults (Button compact variant, Input h-8, Badge verification)
- [x] 05-02-PLAN.md -- Create PageHeader and DataTable composition patterns

**Completed:** 2026-01-28

### Phase 6: Page Migration
**Goal**: Every page in the app looks like it was designed by the same person on the same day
**Depends on**: Phase 5
**Requirements**: PAGE-01, PAGE-02, PAGE-03, PAGE-04, PAGE-05, PAGE-06, PAGE-07, PAGE-08
**Plans**: 7 plans

Plans:
- [x] 06-01-PLAN.md -- Migrate Login and Dashboard to token typography and PageHeader
- [x] 06-02-PLAN.md -- Migrate Study, DeckTable, and StudyStatusBadge to token patterns
- [x] 06-03-PLAN.md -- Migrate Settings to PageHeader and eliminate 15+ arbitrary values
- [x] 06-04-PLAN.md -- Migrate StudySession while preserving intentional deviations
- [x] 06-05-PLAN.md -- Migrate Highlights and HighlightTableRow to PageHeader and token typography
- [x] 06-06-PLAN.md -- Migrate modals, sidebar, bottom nav, and tag selector to token typography
- [x] 06-07-PLAN.md -- Comprehensive audit and visual verification

**Completed:** 2026-01-28

### Phase 7: Design Guide
**Goal**: A new developer (or future Claude) can build a page that looks identical to existing ones without asking questions
**Depends on**: Phase 6
**Requirements**: DOC-01, DOC-02
**Plans**: 1 plan

Plans:
- [x] 07-01-PLAN.md -- Write comprehensive design system guide and replace outdated compact-ui-design-guidelines.md

**Completed:** 2026-01-28

### Phase 8: Token Consumption
**Goal**: Every page uses semantic tokens for spacing, typography, and color -- no raw numeric values remain
**Depends on**: Phase 7 (all original phases complete)
**Requirements**: TOKENS-02 (full satisfaction), TOKENS-08 (full satisfaction)
**Gap Closure**: Closes audit gaps -- spacing tokens BROKEN, color tokens BROKEN, typography flow PARTIAL
**Plans**: 5 plans

Plans:
- [x] 08-01-PLAN.md -- Migrate Settings and Login to semantic spacing, typography, and color tokens
- [x] 08-02-PLAN.md -- Migrate StudySession and Study to semantic tokens (with deviation preservation)
- [x] 08-03-PLAN.md -- Migrate Highlights and Dashboard to semantic tokens
- [x] 08-04-PLAN.md -- Migrate tag, deck, status, and highlight components to semantic tokens
- [x] 08-05-PLAN.md -- Migrate remaining components (nav, modals, popovers, error, data-viz) and run final audit

**Completed:** 2026-01-28

### Phase 9: Component Adoption
**Goal**: Every interactive element uses the standardized shadcn component -- no raw HTML buttons or inputs remain
**Depends on**: Phase 8
**Requirements**: COMP-01 (full adoption), COMP-03 (adopt or remove DataTable)
**Gap Closure**: Closes audit gaps -- Button BROKEN, DataTable ORPHANED
**Plans**: 5 plans

Plans:
- [x] 09-01-PLAN.md -- Migrate Login, Sidebar, ThemeToggle, ErrorBoundary to Button/Input
- [x] 09-02-PLAN.md -- Migrate Settings to Button/Input (file inputs, checkboxes)
- [x] 09-03-PLAN.md -- Migrate StudySession and Study (preserve rating button deviations)
- [x] 09-04-PLAN.md -- Migrate Highlights to Button/Input (comboboxes, filters, bulk actions)
- [x] 09-05-PLAN.md -- Complete component Button adoption + remove orphaned DataTable

**Completed:** 2026-01-28

### Phase 10: Bug Fixes & Guide Accuracy
**Goal**: The design guide accurately describes the codebase and all functional bugs are fixed
**Depends on**: Phase 9
**Requirements**: DOC-01 (accuracy update)
**Gap Closure**: Closes audit gaps -- hsl/oklch bug, guide aspirational rules, stale references
**Plans**: 2 plans

Plans:
- [x] 10-01-PLAN.md -- Fix hsl() wrapping of oklch() values in chart components
- [x] 10-02-PLAN.md -- Update design guide accuracy and fix stale references

**Completed:** 2026-01-29

---

## Milestone Summary

**Key Decisions:**

- "Generous" design language wins (Dashboard/Highlights style -- big titles, generous spacing, rounded containers)
- No ESLint enforcement in v1 scope (deferred to v2 requirements)
- Single concise design guide (not multiple docs)
- Typography scale matches existing Tailwind sizes (text-heading=text-lg, text-body=text-sm)
- Named spacing utilities without prefix (p-md, gap-lg) - no conflicts with breakpoints
- Button 'compact' (h-8) as new CVA default - all existing usages specify explicit size
- PageHeader size='compact' standardized for all pages
- StudySession preserves font-serif, rating colors, full-screen layout as intentional deviations
- DataTable removed per YAGNI - 0 imports after 3+ weeks

**Issues Resolved:**

- Two design languages coexisting (Compact vs Generous) - resolved by picking Generous
- Raw color classes throughout codebase - migrated to semantic tokens
- Inconsistent typography across pages - standardized with token system
- hsl() wrapping of oklch() values in Recharts - fixed

**Technical Debt Accepted:**

- DataTable section in design guide documents removed component (minor)
- StudySession 4 raw SM-2 rating buttons (documented deviation)
- Settings 3 hidden file inputs + 2 checkboxes (not text inputs)
- Minor spacing gaps (2-4px variance) in 6 components (imperceptible)

---

*For current project status, see .planning/ROADMAP.md (next milestone)*

---
*Archived: 2026-01-29*
